<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson 9.3 – Player Roster Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f9f9f9;
        }

        #output div, #leaderboard div {
            margin: 8px 0;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .even {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            background-color: #d0f0ff;
        }

        .odd {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            background-color: #fff0d0;
        }

        button {
            margin-top: 6px;
            margin-left: 6px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
        }

        h2 {
            margin-top: 30px;
        }

        #leaderboard-item {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
    </style>
</head>
<body>
<h2>Player Roster</h2>
<div id="output"></div>

<h3>Add New Player:</h3>
<form>
    <input type="text" name="name" id="name" placeholder="name" required>
    <input type="number" name="score" id="score" placeholder="score" required>
    <input type="number" name="level" id="level" placeholder="Level" required>
    <input type="submit" value="Add Player">
</form>

<h2>Power Level Leaderboard</h2>
<div id="leaderboard"></div>

<script>
    // Author: Adrian M.
    // Lesson 9.3 – Object Array and DOM Display

    class Player {
        constructor(name, score, level) {
            this.name = name;
            this.score = score;
            this.level = level;
        }

        describe() {
            return `${this.name} – Score: ${this.score}, Level: ${this.level}`;
        }

        getPowerLevel() {
            return this.score * this.level;
        }

        levelUp() {
            this.level++;
            console.log(`${this.name} leveled up! New level: ${this.level}`);
            renderAll();
        }

        addScore(points) {
            this.score += points;
            renderAll();
        }
    }

    let players = [
        new Player("Jordan", 120, 2),
        new Player("Taylor", 90, 1),
        new Player("Alex", 150, 3)
    ];

    const output = document.getElementById("output");
    const leaderboardOutput = document.getElementById("leaderboard");

    function renderRoster() {
        output.innerHTML = "";
        players.forEach((player, index) => {
            let div = document.createElement("div");
            div.textContent = player.describe();
            div.className = (index % 2 === 0) ? "even" : "odd";

            let btn = document.createElement("button");
            btn.textContent = "Level Up";
            btn.addEventListener("click", () => {
                player.levelUp();
            });

            let numInput = document.createElement("input");
            numInput.type = "number";
            numInput.placeholder = "Points";
            numInput.style.width = "50px";

            let btn2 = document.createElement("button");
            btn2.textContent = "Add Score";
            btn2.addEventListener("click", () => {
                let points = parseInt(numInput.value) || 0;
                player.addScore(points);
            });

            div.appendChild(btn);
            div.appendChild(numInput);
            div.appendChild(btn2);
            output.appendChild(div);
        });
    }

    function renderLeaderboard() {
        leaderboardOutput.innerHTML = "";

        let sortedPlayers = [...players];
        sortedPlayers.sort((a, b) => b.getPowerLevel() - a.getPowerLevel());

        sortedPlayers.forEach((player, index) => {
            let div = document.createElement("div");
            let rank = index + 1;

            div.innerHTML = `<h3>${rank}.</h3> ${player.name} – Power: ${player.getPowerLevel()}`;

            div.style.backgroundColor = index === 0 ? "#ffd700" : (index === 1 ? "#c0c0c0" : (index === 2 ? "#cd7f32" : "#ffffff"));
            div.id = "leaderboard-item";

            leaderboardOutput.appendChild(div);
        });
    }

    function renderAll() {
        renderRoster();
        renderLeaderboard();

        const tableData = players.map(p => ({
            "Name": p.name,
            "Level": p.level,
            "Score": p.score,
            "Power": p.getPowerLevel()
        }));
        console.clear();
        console.table(tableData);
    }

    renderAll();

    const form = document.querySelector('form');

    form.addEventListener("submit", function(event) {
        event.preventDefault();

        const name = document.getElementById("name").value;
        const score = parseInt(document.getElementById("score").value);
        const level = parseInt(document.getElementById("level").value);

        const newPlayer = new Player(name, score, level);
        players.push(newPlayer);

        renderAll();
        form.reset();
    });
</script>
</body>
</html>